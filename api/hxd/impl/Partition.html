<!DOCTYPE html>
<html lang="en"><!-- use theme color or fallback -->
<!--use textcolor from settings, otherwise create a contrasting color to theme color-->
<head><meta charset="utf-8"/><link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet"/><link href="../../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/><link href="../../bootstrap/css/bootstrap-select.min.css" rel="stylesheet"/><link href="../../../css/styles.min.css" rel="stylesheet"/><link href="../../styles.css" rel="stylesheet"/><script type="text/javascript">var dox = {rootPath: "../../",platforms: ["heaps"]};</script><title>hxd.impl.Partition - Heaps.io Game Engine</title><script src="../../jquery-1.9.1.min.js"></script><script src="../../bootstrap/js/bootstrap.min.js"></script><script src="../../bootstrap/js/bootstrap-select.min.js"></script><script type="text/javascript" src="../../nav.js"></script><script type="text/javascript" src="../../index.js"></script><meta name="description" content="Partition will segment a 2D space into chunks of 2^N size and keep track of each entity position.
It allows to perform efficient queries without checking all the entities."/>    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en"/></head><div class='api-documentation'><body><a href="https://github.com/HeapsIO/" class="fork-button"><img src="../../../img/fork-on-github.png" alt="Fork Heaps on GitHub"/></a><header class="header-documentation"><nav class="top-nav"><a href="../../../" class="button">Home</a><a href="../../../about.html" class="button">About</a><a href="../../../samples/" class="button">Samples</a><a href="../../../documentation/getting-started/" class="button">Online handbook</a><a href="../../" class="button disabled">API</a><a href="https://gitter.im/heapsio/Lobby" class="button" target="_blank">Community</a></nav></header><div class="container main-content"><div class="row-fluid"><div class="span3"><div class="well sidebar-nav"><form class="form-search" id="searchForm"><div class="input-prepend input-block-level"><span class="add-on"><i class="icon-search"></i></span><input id="search" type="text" placeholder="Search" autocomplete="off"/></div></form></div><div class="well sidebar-nav"><div id="nav"></div></div></div><div class="span9"><div class="page-header"><span class="viewsource"><a href="https://github.com/HeapsIO/heaps/blob/master/hxd/impl/Partition.hx" class="btn btn-medium"><i class="fa fa-eye"></i> View source</a></span><h1><small>class</small> Partition&lt;<span class="type">T</span>&gt;</h1><h4><small>package <a href="../../hxd/impl/index.html">hxd.impl</a></small></h4>    </div><div class="body"><div class="doc doc-main"><div class="indent"><p>Partition will segment a 2D space into chunks of 2^N size and keep track of each entity position.
It allows to perform efficient queries without checking all the entities.</p></div></div><h3 class="section">Constructor</h3><div class="fields"><div class="field "><a name="new"></a><h3><p><code><a href="#new"><span class="identifier">new</span></a> (<span style="white-space:nowrap">width:<span class="type">Int</span>,</span> <span style="white-space:nowrap">height:<span class="type">Int</span>,</span> <span style="white-space:nowrap">pbits:<span class="type">Int</span></span>)</code></p></h3><div class="doc"><p>Creates a new partition for the given world size.
PBits tells the number of bits for the chunk size.
Using too large chunks will not perform well if there's too many entities into them.
Using too small chunks will require more often to move entities between chunks for each sync()</p></div></div></div><h3 class="section">Methods</h3><div class="fields"><div class="field "><a name="add"></a><h3><p><code><a href="#add"><span class="identifier">add</span></a> (<span style="white-space:nowrap">e:<span class="type">T</span></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Adds an entity to our partition system.
If the entity is already present, it will sync() it, but in a less efficient manner.
If an entity is outside of world bounds, an error is throw in debug, otherwise the result is unspecified.</p></div></div><div class="field "><a name="count"></a><h3><p><code><span class="label">inline</span> <a href="#count"><span class="identifier">count</span></a> (<span style="white-space:nowrap">x:<span class="type">Float</span>,</span> <span style="white-space:nowrap">y:<span class="type">Float</span>,</span> <span style="white-space:nowrap">ray:<span class="type">Float</span>,</span> <span style="white-space:nowrap">cond:<span class="type">T</span>&nbsp;&#8209;&gt;&nbsp;<span class="type">Bool</span></span>):<span class="type">Int</span></code></p></h3><div class="doc"><p></p></div></div><div class="field "><a name="query"></a><h3><p><code><span class="label">inline</span> <a href="#query"><span class="identifier">query</span></a> (<span style="white-space:nowrap">x:<span class="type">Float</span>,</span> <span style="white-space:nowrap">y:<span class="type">Float</span>,</span> <span style="white-space:nowrap">ray:<span class="type">Float</span></span>):<a class="type" title="" href="../../hxd/impl/PartitionIterator.html">PartitionIterator</a>&lt;<span class="type">T</span>&gt;</code></p></h3><div class="doc"><p>Query a list of entities found within the given disc.
Important : query results are optimized to perform zero allocation, so making a query will overwrite the results from a previous one.
Make sure not to make a second query before the first one is fully processed.</p></div></div><div class="field "><a name="queryNearest"></a><h3><p><code><span class="label">inline</span> <a href="#queryNearest"><span class="identifier">queryNearest</span></a> (<span style="white-space:nowrap">x:<span class="type">Float</span>,</span> <span style="white-space:nowrap">y:<span class="type">Float</span>,</span> <span style="white-space:nowrap">ray:<span class="type">Float</span>,</span> <span style="white-space:nowrap">calcDistSq:<span class="type">T</span>&nbsp;&#8209;&gt;&nbsp;<span class="type">Float</span></span>):<span class="type">T</span></code></p></h3><div class="doc"><p></p></div></div><div class="field "><a name="remove"></a><h3><p><code><a href="#remove"><span class="identifier">remove</span></a> (<span style="white-space:nowrap">e:<span class="type">T</span></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Removes an entity to our partition system.
Multiple removes of the same entity does not have any side effect.</p></div></div><div class="field "><a name="sync"></a><h3><p><code><span class="label">inline</span> <a href="#sync"><span class="identifier">sync</span></a> (<span style="white-space:nowrap">e:<span class="type">T</span></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>After your entity position have changed, you can either call syncAll() or sync() for the entities that have moved.
Please note that you don't have to call sync() for each change, but at least when the entity has moved a distance of the chunk size.</p></div></div><div class="field "><a name="syncAll"></a><h3><p><code><a href="#syncAll"><span class="identifier">syncAll</span></a> ():<span class="type">Void</span></code></p></h3><div class="doc"><p>Force a complete refresh of entities partition. If only a few entities are moving, using sync() will be more efficient.
If most of the entities are moving each frame, it is more efficient to call syncAll()</p></div></div></div></div></div></div></div><footer><div class="container row"><div class="col-5"><a href="../../../"><img src="../../../img/logo.svg"/></a></div><div class="col-3 links"><h3>Heaps.io</h3><p>Heaps is an open source and multi-platform toolkit to create 2D and 3D games.</p><a href="../../../documentation/getting-started">Download</a><a href="../../../about.html">About</a><a href="../../../api">API</a><a href="https://github.com/HeapsIO/">Contribute</a><a href="https://gitter.im/heapsio/Lobby">Community</a></div><div class="col-1">&nbsp;</div><div class="col-3 links"><h3>Haxe</h3><p>Haxe is an open source and cross-platform language and toolkit.</p><a href="https://www.haxe.org">About</a><a href="https://www.haxe.org/use-cases">Use cases</a><a href="https://haxe.org/documentation/introduction/">Learn</a><a href="https://www.haxe.org/foundation">Haxe foundation</a></div></div><div class="copyright">&copy; 2018 <a href="https://haxe.org/foundation/">Haxe Foundation</a>| <a href="https://github.com/HeapsIO/heaps/blob/master/hxd/impl/Partition.hx">Contribute to this page</a>| <a href="https://feathericons.com/" rel="nofollow">Feather open source icons</a></div></footer></div><script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script><script src="../..//highlighter.js"></script><link href="../../highlighter.css" rel="stylesheet"/></body></html>