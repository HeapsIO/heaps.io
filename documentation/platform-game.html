<!DOCTYPE html>
<html lang="en" id="page"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width"/><title>Platform game  - Heaps.io Game Engine</title><base href="./.."/>
<link href="css/styles.min.css" rel="stylesheet" type="text/css"/><link rel="canonical" href="https://heaps.io/documentation/platform-game.html"/><link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed:300" rel="stylesheet"/><script src="js/jquery-3.3.1.min.js" type="text/javascript"></script><script src="js/JsTools.js" type="text/javascript"></script><meta name="description" content="A template for a very basic platform game."/>
<meta name="twitter:creator" content="@ncanasse"/>
<meta property="og:title" content="Platform game  - Heaps.io Game Engine"/><meta property="og:description" content="A template for a very basic platform game."/><meta property="og:type" content="website"/><meta property="og:url" content="https://heaps.io/documentation/platform-game.html"/><meta property="og:image" content="https://heaps.io//img/share.png"/>    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en"/></head><body><a href="https://github.com/HeapsIO/" class="fork-button"><img src="img/fork-on-github.png" alt="Fork Heaps on GitHub"/></a><main><header class="header-page"><a class="mobileMenu" href="#"><img src="img/menu.png" alt="Menu"/> </a><nav class="top-nav"><a href="index.html" class="button ">Home</a><a href="about.html" class="button ">About</a><a href="samples/" class="button ">Samples</a><a href="documentation/" class="button disabled">Documentation</a><a href="api/" class="button">API</a><a href="https://community.heaps.io/" class="button" target="_blank">Community</a></nav><div class="logo"><a href="./"><img src="img/logo.svg"/></a></div></header> <div class="row container"><nav class="col-4 sidebar"><ul class="unstyled"><li><a href="documentation/home.html">Home</a></li><li><a href="documentation/getting-started.html">Getting Started</a><ul><li><a href="documentation/installation.html">Installation</a></li><li><a href="documentation/hello-world.html">Hello World</a></li><li><a href="documentation/hello-hashlink.html">Hello Hashlink</a></li><li><a href="documentation/first-outlook.html">First outlook</a></li></ul></li><li><a href="documentation/h2d.html">H2D</a><ul><li><a href="documentation/h2d-introduction.html">Introduction</a></li><li><a href="documentation/objects.html">Object</a><ul><li><a href="documentation/object-trees.html">Object trees</a></li></ul></li><li><a href="documentation/scenes.html">Scenes</a><ul><li><a href="documentation/layers.html">Layers</a></li><li><a href="documentation/2d-camera.html">2D Camera</a></li></ul></li><li><a href="documentation/h2d-events-and-interactivity.html">Events and interaction</a></li><li><a href="documentation/drawable.html">Drawable</a><ul><li><a href="documentation/text.html">Displaying text</a></li><li><a href="documentation/graphics.html">Drawing Graphics</a></li><li><a href="documentation/animation.html">Animation</a></li></ul></li><li><a href="documentation/graphical-surfaces.html">Graphical surfaces</a></li><li><a href="documentation/drawing-tiles.html">Drawing Tiles</a></li><li><a href="documentation/optimizing-bitmap-usage.html">Optimizing bitmaps</a></li><li><a href="documentation/filters.html">Filters</a></li><li><a href="documentation/h2d-shaders.html">Shaders</a></li><li><a href="documentation/flow.html">Flow</a></li><li><a href="documentation/simple-sprites.html">Creating simple sprites</a></li></ul></li><li><a href="documentation/h3d.html">H3D</a><ul><li><a href="documentation/h3d-events-and-interactivity.html">Events and interaction</a></li><li><a href="documentation/fbx-models.html">FBX Models</a></li><li><a href="documentation/gpu-particles.html">GPU Particles</a></li><li><a href="documentation/lights.html">Lights</a></li><li><a href="documentation/materials.html">Material Basics</a></li><li><a href="documentation/pbr-materials.html">PBR Materials</a></li><li><a href="documentation/shadows.html">Shadows</a></li><li><a href="documentation/world-batching.html">World Batching</a></li><li><a href="documentation/render-target.html">Render Target</a></li></ul></li><li><a href="documentation/hxd.html">HXD</a><ul><li><a href="documentation/resource-management.html">Resource management</a></li><li><a href="documentation/resource-baking.html">Resource Baking</a></li><li><a href="documentation/sound.html">Sound</a></li></ul></li><li><a href="documentation/flags.html">HXML flags</a></li><li><a href="documentation/shaders.html">Shaders</a><ul><li><a href="documentation/hxsl.html">Hxsl</a></li></ul></li><li><a href="documentation/target-platforms.html">Target platforms</a><ul><li><a href="documentation/hashlink.html">HashLink</a></li><li><a href="documentation/html5.html">HTML5</a></li></ul></li><li><a href="documentation/tools.html">Tools</a><ul><li><a href="documentation/castle-db.html">Castle DB</a></li><li><a href="documentation/domkit.html">Using Heaps Components</a></li><li><a href="documentation/hide.html">Hide</a></li><li><a href="documentation/external-libraries.html">External libraries</a><ul><li><a href="documentation/demo-of-slide.html">Demo of Slide</a></li><li><a href="documentation/haxeui.html">HaxeUI</a></li></ul></li></ul></li><li><a href="documentation/sample-games-for-learning.html">Sample games for learning</a><ul><li><a href="documentation/breakout.html">Breakout</a></li><li class="active"><a href="documentation/platform-game.html" class="current">Platform game</a></li><li><a href="documentation/rogue.html">Rogue</a></li></ul></li><li><a href="documentation/jam-games.html">Jam games</a></li><li><a href="documentation/development.html">Development</a></li></ul></nav><article class="col-8 documentation"><div class="content"><h1><span>Platform game</span></h1><p>A template for a very basic <a href="https://en.wikipedia.org/wiki/Platform_game">platform game</a>.</p>
<h2>Screenshot</h2>
<p><img src="https://user-images.githubusercontent.com/88530062/174939197-b3962d74-38c7-4bd3-8b43-d78f73347102.png"/></p>
<h2>Code</h2>
<pre class="highlighted">
<span class="mtk5">class</span><span class="mtk1"> </span><span class="mtk9">PlatformGame</span><span class="mtk1"> </span><span class="mtk5">extends</span><span class="mtk1"> hxd.</span><span class="mtk9">App</span><span class="mtk1"> {</span>
<span class="mtk1">    </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">groundLevel</span><span class="mtk1"> : </span><span class="mtk9">Float</span><span class="mtk1">;</span>
<span class="mtk1">    </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">player</span><span class="mtk1"> : h2d.</span><span class="mtk9">Object</span><span class="mtk1">;</span>
<span class="mtk1">    </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">player_vspeed</span><span class="mtk1"> : </span><span class="mtk9">Float</span><span class="mtk1"> = </span><span class="mtk8">0</span><span class="mtk1">; </span><span class="mtk4">// the vertical speed of the player</span>
<span class="mtk1">    </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">platforms</span><span class="mtk1"> : </span><span class="mtk9">Array</span><span class="mtk1">&lt;h2d.</span><span class="mtk9">Object</span><span class="mtk1">&gt; = [];</span>
<span class="mtk1">    </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">trampolines</span><span class="mtk1"> : </span><span class="mtk9">Array</span><span class="mtk1">&lt;h2d.</span><span class="mtk9">Object</span><span class="mtk1">&gt; = [];</span>
<span class="mtk1">    </span><span class="mtk5">static</span><span class="mtk1"> </span><span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk10">main</span><span class="mtk1">() {</span><span class="mtk5">new</span><span class="mtk1"> </span><span class="mtk9">PlatformGame</span><span class="mtk1">();}</span>
<span class="mtk1">    </span><span class="mtk5">override</span><span class="mtk1"> </span><span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk10">init</span><span class="mtk1">() {</span>
<span class="mtk1">        </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">howtoplayinfo</span><span class="mtk1"> = </span><span class="mtk5">new</span><span class="mtk1"> h2d.</span><span class="mtk9">Text</span><span class="mtk1">( hxd.res.</span><span class="mtk9">DefaultFont</span><span class="mtk1">.</span><span class="mtk10">get</span><span class="mtk1">(), </span><span class="mtk17">s2d</span><span class="mtk1"> );</span>
<span class="mtk1">        </span><span class="mtk17">howtoplayinfo</span><span class="mtk1">.</span><span class="mtk17">text</span><span class="mtk1"> = </span><span class="mtk7">"Use arrow keys or w-a-s-d to move (also &lt;SPACE&gt; to jump)"</span><span class="mtk1">;</span>

<span class="mtk1">        </span><span class="mtk4">// level ground / earth</span>
<span class="mtk1">        </span><span class="mtk17">groundLevel</span><span class="mtk1"> = </span><span class="mtk17">s2d</span><span class="mtk1">.</span><span class="mtk17">height</span><span class="mtk1">-</span><span class="mtk8">64</span><span class="mtk1">;</span>
<span class="mtk1">        </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">ground</span><span class="mtk1"> = </span><span class="mtk5">new</span><span class="mtk1"> h2d.</span><span class="mtk9">Graphics</span><span class="mtk1">( </span><span class="mtk17">s2d</span><span class="mtk1"> );</span>
<span class="mtk1">        </span><span class="mtk17">ground</span><span class="mtk1">.</span><span class="mtk10">beginFill</span><span class="mtk1">( </span><span class="mtk8">0x808080</span><span class="mtk1"> );</span>
<span class="mtk1">        </span><span class="mtk17">ground</span><span class="mtk1">.</span><span class="mtk10">drawRect</span><span class="mtk1">( </span><span class="mtk8">0</span><span class="mtk1">, </span><span class="mtk17">groundLevel</span><span class="mtk1">, </span><span class="mtk17">s2d</span><span class="mtk1">.</span><span class="mtk17">width</span><span class="mtk1">, </span><span class="mtk17">s2d</span><span class="mtk1">.</span><span class="mtk17">height</span><span class="mtk1"> );</span>

<span class="mtk1">        </span><span class="mtk4">// creating the player</span>
<span class="mtk1">        </span><span class="mtk17">player</span><span class="mtk1"> = </span><span class="mtk5">new</span><span class="mtk1"> h2d.</span><span class="mtk9">Object</span><span class="mtk1">(</span><span class="mtk17">s2d</span><span class="mtk1">); </span><span class="mtk4">// a mere container (this position we'll use as player's feet position)</span>
<span class="mtk1">        </span><span class="mtk4">// player's body = bitmap (so we can use a real image file later here)</span>
<span class="mtk1">        </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">tile</span><span class="mtk1"> = h2d.</span><span class="mtk9">Tile</span><span class="mtk1">.</span><span class="mtk10">fromColor</span><span class="mtk1">( </span><span class="mtk8">0x0000FF</span><span class="mtk1">, </span><span class="mtk8">12</span><span class="mtk1">, </span><span class="mtk8">24</span><span class="mtk1"> );</span>
<span class="mtk1">        </span><span class="mtk17">tile</span><span class="mtk1">.</span><span class="mtk17">dx</span><span class="mtk1"> -= </span><span class="mtk8">6</span><span class="mtk1">;</span>
<span class="mtk1">        </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">b</span><span class="mtk1"> = </span><span class="mtk5">new</span><span class="mtk1"> h2d.</span><span class="mtk9">Bitmap</span><span class="mtk1">( </span><span class="mtk17">tile</span><span class="mtk1">, </span><span class="mtk17">player</span><span class="mtk1"> );</span>
<span class="mtk1">        </span><span class="mtk17">b</span><span class="mtk1">.</span><span class="mtk10">setPosition</span><span class="mtk1">( </span><span class="mtk8">0</span><span class="mtk1">, -</span><span class="mtk8">24</span><span class="mtk1"> );</span>
<span class="mtk1">        </span><span class="mtk4">// player's head</span>
<span class="mtk1">        </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">g</span><span class="mtk1"> = </span><span class="mtk5">new</span><span class="mtk1"> h2d.</span><span class="mtk9">Graphics</span><span class="mtk1">( </span><span class="mtk17">player</span><span class="mtk1"> );</span>
<span class="mtk1">        </span><span class="mtk17">g</span><span class="mtk1">.</span><span class="mtk10">beginFill</span><span class="mtk1">( </span><span class="mtk8">0x0000FF</span><span class="mtk1"> );</span>
<span class="mtk1">        </span><span class="mtk17">g</span><span class="mtk1">.</span><span class="mtk10">drawCircle</span><span class="mtk1">( </span><span class="mtk8">0</span><span class="mtk1">, </span><span class="mtk8">0</span><span class="mtk1">, </span><span class="mtk8">8</span><span class="mtk1"> );</span>
<span class="mtk1">        </span><span class="mtk17">g</span><span class="mtk1">.</span><span class="mtk10">setPosition</span><span class="mtk1">( </span><span class="mtk8">0</span><span class="mtk1">, -</span><span class="mtk8">32</span><span class="mtk1"> );</span>

<span class="mtk1">        </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk10">setPosition</span><span class="mtk1">( </span><span class="mtk17">s2d</span><span class="mtk1">.</span><span class="mtk17">width</span><span class="mtk1">/</span><span class="mtk8">2</span><span class="mtk1">, </span><span class="mtk8">0</span><span class="mtk1"> );</span>

<span class="mtk1">        </span><span class="mtk4">// creating some platforms</span>
<span class="mtk1">        </span><span class="mtk14">for</span><span class="mtk1">( </span><span class="mtk17">i</span><span class="mtk1"> </span><span class="mtk5">in</span><span class="mtk1"> </span><span class="mtk8">0</span><span class="mtk1">...</span><span class="mtk8">100</span><span class="mtk1"> ){</span>
<span class="mtk1">            </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">tile</span><span class="mtk1"> = h2d.</span><span class="mtk9">Tile</span><span class="mtk1">.</span><span class="mtk10">fromColor</span><span class="mtk1">( </span><span class="mtk8">0xA0A0A0</span><span class="mtk1">, </span><span class="mtk9">Math</span><span class="mtk1">.</span><span class="mtk10">round</span><span class="mtk1">( </span><span class="mtk8">64</span><span class="mtk1">+hxd.</span><span class="mtk9">Math</span><span class="mtk1">.</span><span class="mtk10">random</span><span class="mtk1">(</span><span class="mtk8">320</span><span class="mtk1">) ), </span><span class="mtk9">Math</span><span class="mtk1">.</span><span class="mtk10">round</span><span class="mtk1">( </span><span class="mtk8">16</span><span class="mtk1"> + hxd.</span><span class="mtk9">Math</span><span class="mtk1">.</span><span class="mtk10">random</span><span class="mtk1">(</span><span class="mtk8">32</span><span class="mtk1">) ) );</span>
<span class="mtk1">            </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">p</span><span class="mtk1"> = </span><span class="mtk5">new</span><span class="mtk1"> h2d.</span><span class="mtk9">Bitmap</span><span class="mtk1">( </span><span class="mtk17">tile</span><span class="mtk1">, </span><span class="mtk17">s2d</span><span class="mtk1"> );</span>
<span class="mtk1">            </span><span class="mtk17">p</span><span class="mtk1">.</span><span class="mtk10">setPosition</span><span class="mtk1">( -</span><span class="mtk8">8000</span><span class="mtk1"> + hxd.</span><span class="mtk9">Math</span><span class="mtk1">.</span><span class="mtk10">random</span><span class="mtk1">(</span><span class="mtk8">16000</span><span class="mtk1">), </span><span class="mtk8">50</span><span class="mtk1"> + hxd.</span><span class="mtk9">Math</span><span class="mtk1">.</span><span class="mtk10">random</span><span class="mtk1">( </span><span class="mtk17">s2d</span><span class="mtk1">.</span><span class="mtk17">height</span><span class="mtk1">-</span><span class="mtk8">50</span><span class="mtk1">-</span><span class="mtk8">48</span><span class="mtk1">-</span><span class="mtk8">32</span><span class="mtk1"> ) );</span>
<span class="mtk1">            </span><span class="mtk17">platforms</span><span class="mtk1">.</span><span class="mtk10">push</span><span class="mtk1">( </span><span class="mtk17">p</span><span class="mtk1"> );</span>
<span class="mtk1">        }</span>

<span class="mtk1">        </span><span class="mtk4">// create trampolines</span>
<span class="mtk1">        </span><span class="mtk14">for</span><span class="mtk1">( </span><span class="mtk17">i</span><span class="mtk1"> </span><span class="mtk5">in</span><span class="mtk1"> </span><span class="mtk8">0</span><span class="mtk1">...</span><span class="mtk8">100</span><span class="mtk1"> ){</span>
<span class="mtk1">            </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">t</span><span class="mtk1"> = </span><span class="mtk5">new</span><span class="mtk1"> h2d.</span><span class="mtk9">Graphics</span><span class="mtk1">( </span><span class="mtk17">s2d</span><span class="mtk1"> );</span>
<span class="mtk1">            </span><span class="mtk17">t</span><span class="mtk1">.</span><span class="mtk10">beginFill</span><span class="mtk1">( </span><span class="mtk8">0xFFFF00</span><span class="mtk1"> );</span>
<span class="mtk1">            </span><span class="mtk17">t</span><span class="mtk1">.</span><span class="mtk10">addVertex</span><span class="mtk1">( -</span><span class="mtk8">16</span><span class="mtk1">,  </span><span class="mtk8">0</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1"> );</span>
<span class="mtk1">            </span><span class="mtk17">t</span><span class="mtk1">.</span><span class="mtk10">addVertex</span><span class="mtk1">(   </span><span class="mtk8">0</span><span class="mtk1">,-</span><span class="mtk8">16</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1"> );</span>
<span class="mtk1">            </span><span class="mtk17">t</span><span class="mtk1">.</span><span class="mtk10">addVertex</span><span class="mtk1">(  </span><span class="mtk8">16</span><span class="mtk1">,  </span><span class="mtk8">0</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1"> );</span>
<span class="mtk1">            </span><span class="mtk17">t</span><span class="mtk1">.</span><span class="mtk10">addVertex</span><span class="mtk1">( -</span><span class="mtk8">16</span><span class="mtk1">,  </span><span class="mtk8">0</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1">, </span><span class="mtk8">1</span><span class="mtk1"> );</span>
<span class="mtk1">            </span><span class="mtk17">t</span><span class="mtk1">.</span><span class="mtk10">setPosition</span><span class="mtk1">( -</span><span class="mtk8">8000</span><span class="mtk1"> + hxd.</span><span class="mtk9">Math</span><span class="mtk1">.</span><span class="mtk10">random</span><span class="mtk1">(</span><span class="mtk8">16000</span><span class="mtk1">), </span><span class="mtk17">groundLevel</span><span class="mtk1"> );</span>
<span class="mtk1">            </span><span class="mtk17">trampolines</span><span class="mtk1">.</span><span class="mtk10">push</span><span class="mtk1">( </span><span class="mtk17">t</span><span class="mtk1"> );</span>
<span class="mtk1">        }</span>
<span class="mtk1">    }</span>
<span class="mtk1">    </span><span class="mtk5">override</span><span class="mtk1"> </span><span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk10">update</span><span class="mtk1">(</span><span class="mtk17">dt</span><span class="mtk1">:</span><span class="mtk9">Float</span><span class="mtk1">) {</span>

<span class="mtk1">        </span><span class="mtk4">// gravity force (very basic...)</span>
<span class="mtk1">        </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1"> += </span><span class="mtk17">player_vspeed</span><span class="mtk1">;</span>
<span class="mtk1">        </span><span class="mtk4">// when on earth ground</span>
<span class="mtk1">        </span><span class="mtk14">if</span><span class="mtk1">( </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1"> &lt; </span><span class="mtk17">groundLevel</span><span class="mtk1"> ){</span>
<span class="mtk1">            </span><span class="mtk17">player_vspeed</span><span class="mtk1">+=</span><span class="mtk8">0.2</span><span class="mtk1">;</span>
<span class="mtk1">        }</span>
<span class="mtk1">        </span><span class="mtk14">else</span><span class="mtk1"> {</span>
<span class="mtk1">            </span><span class="mtk17">player_vspeed</span><span class="mtk1"> = </span><span class="mtk8">0</span><span class="mtk1">;</span>
<span class="mtk1">            </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1"> = </span><span class="mtk17">groundLevel</span><span class="mtk1">;</span>
<span class="mtk1">        }</span>
<span class="mtk1">        </span><span class="mtk4">// when on platform</span>
<span class="mtk1">        </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">isOnPlatform</span><span class="mtk1"> : </span><span class="mtk9">Bool</span><span class="mtk1"> = </span><span class="mtk5">false</span><span class="mtk1">;</span>
<span class="mtk1">        </span><span class="mtk14">for</span><span class="mtk1">( </span><span class="mtk17">p</span><span class="mtk1"> </span><span class="mtk5">in</span><span class="mtk1"> </span><span class="mtk17">platforms</span><span class="mtk1"> ){</span>
<span class="mtk1">            </span><span class="mtk14">if</span><span class="mtk1">( </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk10">getBounds</span><span class="mtk1">().</span><span class="mtk10">intersects</span><span class="mtk1">( </span><span class="mtk17">p</span><span class="mtk1">.</span><span class="mtk10">getBounds</span><span class="mtk1">() ) &amp;&amp; </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1"> &lt; </span><span class="mtk17">p</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1">+</span><span class="mtk8">16</span><span class="mtk1"> ){</span>
<span class="mtk1">                </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1"> = </span><span class="mtk17">p</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1">;</span>
<span class="mtk1">                </span><span class="mtk17">player_vspeed</span><span class="mtk1"> = </span><span class="mtk8">0</span><span class="mtk1">;</span>
<span class="mtk1">                </span><span class="mtk17">isOnPlatform</span><span class="mtk1"> = </span><span class="mtk5">true</span><span class="mtk1">;</span>
<span class="mtk1">            }</span>
<span class="mtk1">        }</span>

<span class="mtk1">        </span><span class="mtk4">// can jump when on ground</span>
<span class="mtk1">        </span><span class="mtk14">if</span><span class="mtk1">( hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk10">isPressed</span><span class="mtk1">( hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk17">UP</span><span class="mtk1"> ) || hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk10">isPressed</span><span class="mtk1">( hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk17">W</span><span class="mtk1"> ) || hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk10">isPressed</span><span class="mtk1">( hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk17">SPACE</span><span class="mtk1"> ) )</span>
<span class="mtk1">        </span><span class="mtk4">//if( player_vspeed == 0 &amp;&amp; player.y == groundLevel ){</span>
<span class="mtk1">        </span><span class="mtk14">if</span><span class="mtk1">( </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1"> == </span><span class="mtk17">groundLevel</span><span class="mtk1"> || </span><span class="mtk17">isOnPlatform</span><span class="mtk1"> ){</span>
<span class="mtk1">            </span><span class="mtk17">player_vspeed</span><span class="mtk1"> = -</span><span class="mtk8">8</span><span class="mtk1">;</span>
<span class="mtk1">        }</span>
<span class="mtk1">        </span><span class="mtk4">// move left &amp; right</span>
<span class="mtk1">        </span><span class="mtk14">if</span><span class="mtk1">( hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk10">isDown</span><span class="mtk1">( hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk17">LEFT</span><span class="mtk1"> ) || hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk10">isDown</span><span class="mtk1">( hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk17">A</span><span class="mtk1"> ) ){</span>
<span class="mtk1">            </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">x</span><span class="mtk1"> -= </span><span class="mtk8">2</span><span class="mtk1">;</span>
<span class="mtk1">            </span><span class="mtk14">for</span><span class="mtk1">( </span><span class="mtk17">o</span><span class="mtk1"> </span><span class="mtk5">in</span><span class="mtk1"> </span><span class="mtk17">platforms</span><span class="mtk1"> )</span>
<span class="mtk1">                </span><span class="mtk17">o</span><span class="mtk1">.</span><span class="mtk17">x</span><span class="mtk1"> += </span><span class="mtk8">2</span><span class="mtk1">;</span>
<span class="mtk1">            </span><span class="mtk14">for</span><span class="mtk1">( </span><span class="mtk17">o</span><span class="mtk1"> </span><span class="mtk5">in</span><span class="mtk1"> </span><span class="mtk17">trampolines</span><span class="mtk1"> )</span>
<span class="mtk1">                </span><span class="mtk17">o</span><span class="mtk1">.</span><span class="mtk17">x</span><span class="mtk1"> += </span><span class="mtk8">2</span><span class="mtk1">;</span>
<span class="mtk1">        }</span>
<span class="mtk1">        </span><span class="mtk14">if</span><span class="mtk1">( hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk10">isDown</span><span class="mtk1">( hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk17">RIGHT</span><span class="mtk1"> ) || hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk10">isDown</span><span class="mtk1">( hxd.</span><span class="mtk9">Key</span><span class="mtk1">.</span><span class="mtk17">D</span><span class="mtk1"> ) ){</span>
<span class="mtk1">            </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">x</span><span class="mtk1"> += </span><span class="mtk8">2</span><span class="mtk1">;</span>
<span class="mtk1">            </span><span class="mtk14">for</span><span class="mtk1">( </span><span class="mtk17">o</span><span class="mtk1"> </span><span class="mtk5">in</span><span class="mtk1"> </span><span class="mtk17">platforms</span><span class="mtk1"> )</span>
<span class="mtk1">                </span><span class="mtk17">o</span><span class="mtk1">.</span><span class="mtk17">x</span><span class="mtk1"> -= </span><span class="mtk8">2</span><span class="mtk1">;</span>
<span class="mtk1">            </span><span class="mtk14">for</span><span class="mtk1">( </span><span class="mtk17">o</span><span class="mtk1"> </span><span class="mtk5">in</span><span class="mtk1"> </span><span class="mtk17">trampolines</span><span class="mtk1"> )</span>
<span class="mtk1">                </span><span class="mtk17">o</span><span class="mtk1">.</span><span class="mtk17">x</span><span class="mtk1"> -= </span><span class="mtk8">2</span><span class="mtk1">;</span>
<span class="mtk1">        }</span>
<span class="mtk1">        </span><span class="mtk4">// trampoline effects</span>
<span class="mtk1">        </span><span class="mtk14">for</span><span class="mtk1">( </span><span class="mtk17">t</span><span class="mtk1"> </span><span class="mtk5">in</span><span class="mtk1"> </span><span class="mtk17">trampolines</span><span class="mtk1"> )</span>
<span class="mtk1">            </span><span class="mtk14">if</span><span class="mtk1">( </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk10">getBounds</span><span class="mtk1">().</span><span class="mtk10">intersects</span><span class="mtk1">( </span><span class="mtk17">t</span><span class="mtk1">.</span><span class="mtk10">getBounds</span><span class="mtk1">() ) )</span>
<span class="mtk1">                </span><span class="mtk17">player_vspeed</span><span class="mtk1"> = -</span><span class="mtk8">15</span><span class="mtk1">;</span>
<span class="mtk1">        </span><span class="mtk4">// player can't escape scene</span>
<span class="mtk1">        </span><span class="mtk14">if</span><span class="mtk1">( </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1">&lt;</span><span class="mtk8">0</span><span class="mtk1"> )</span>
<span class="mtk1">            </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1">=</span><span class="mtk8">0</span><span class="mtk1">;</span>
<span class="mtk1">        </span><span class="mtk14">if</span><span class="mtk1">( </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1">&gt;</span><span class="mtk17">groundLevel</span><span class="mtk1"> )</span>
<span class="mtk1">            </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">y</span><span class="mtk1">=</span><span class="mtk17">groundLevel</span><span class="mtk1">;</span>
<span class="mtk1">        </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk17">x_offset_to_keep</span><span class="mtk1"> = </span><span class="mtk8">400</span><span class="mtk1">; </span><span class="mtk4">// keep a gap between player and scene's horizontal borders</span>
<span class="mtk1">        </span><span class="mtk14">if</span><span class="mtk1">( </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">x</span><span class="mtk1">&lt;</span><span class="mtk8">0</span><span class="mtk1">+</span><span class="mtk17">x_offset_to_keep</span><span class="mtk1"> )</span>
<span class="mtk1">            </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">x</span><span class="mtk1">=</span><span class="mtk8">0</span><span class="mtk1">+</span><span class="mtk17">x_offset_to_keep</span><span class="mtk1">;</span>
<span class="mtk1">        </span><span class="mtk14">if</span><span class="mtk1">( </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">x</span><span class="mtk1">&gt;</span><span class="mtk17">s2d</span><span class="mtk1">.</span><span class="mtk17">width</span><span class="mtk1">-</span><span class="mtk17">x_offset_to_keep</span><span class="mtk1"> )</span>
<span class="mtk1">            </span><span class="mtk17">player</span><span class="mtk1">.</span><span class="mtk17">x</span><span class="mtk1">=</span><span class="mtk17">s2d</span><span class="mtk1">.</span><span class="mtk17">width</span><span class="mtk1">-</span><span class="mtk17">x_offset_to_keep</span><span class="mtk1">;</span>

<span class="mtk1">        </span><span class="mtk4">//trace(player.x, player.y, player_vspeed);</span>
<span class="mtk1">    }</span>
<span class="mtk1">}</span>
</pre>
<h2>A basic hxml-file proposal (for HashLink)</h2>
<pre><code>-lib heaps
-lib hlsdl
-main PlatformGame
-hl platform_game.hl
-D windowSize=1280x720</code></pre><hr/><div class="contribution"><span class="contribution-link"><svg width="16" height="16" viewBox="0 0 1024 1024"><path fill="#222" d="M978.101 45.898c-28.77-28.768-67.018-44.611-107.701-44.611-40.685 0-78.933 15.843-107.701 44.611l-652.8 652.8c-2.645 2.645-4.678 5.837-5.957 9.354l-102.4 281.6c-3.4 9.347-1.077 19.818 5.957 26.85 4.885 4.888 11.43 7.499 18.104 7.499 2.933 0 5.891-0.502 8.744-1.541l281.6-102.4c3.515-1.28 6.709-3.312 9.354-5.958l652.8-652.8c28.768-28.768 44.613-67.018 44.613-107.702s-15.843-78.933-44.613-107.701zM293.114 873.883l-224.709 81.71 81.712-224.707 566.683-566.683 142.997 142.997-566.683 566.683zM941.899 225.098l-45.899 45.899-142.997-142.997 45.899-45.899c19.098-19.098 44.49-29.614 71.498-29.614s52.4 10.518 71.499 29.616c19.098 19.098 29.616 44.49 29.616 71.498s-10.52 52.4-29.616 71.498z"></path></svg><a href="https://github.com/HeapsIO/heaps-doc/edit/master/Platform-game.md?message=Update:%20Platform game&amp;description=%0A%0ASources:%0A*%20https://heaps.io/documentation/platform-game.html" rel="external">Edit Page</a></span><span class="contribution-link"><svg width="16" height="16" viewBox="0 0 1024 1024"><path fill="#222" d="M896 614.4h-77.544c-3.19-56.282-16.878-110.243-39.965-158.814 53.056-15.624 91.909-64.739 91.909-122.786 0-14.138-11.461-25.6-25.6-25.6s-25.6 11.462-25.6 25.6c0 38.984-29.205 71.254-66.88 76.138-8.928-13.632-18.678-26.68-29.259-39.026-5.515-6.435-11.203-12.6-17.032-18.525 7.147-22.477 10.771-45.877 10.771-69.787 0-127.043-103.357-230.4-230.4-230.4s-230.4 103.357-230.4 230.4c0 23.909 3.624 47.309 10.77 69.787-5.829 5.923-11.515 12.090-17.032 18.525-10.582 12.346-20.331 25.394-29.259 39.026-37.674-4.883-66.878-37.154-66.878-76.138 0-14.138-11.462-25.6-25.6-25.6s-25.6 11.462-25.6 25.6c0 58.046 38.853 107.162 91.907 122.784-23.086 48.573-36.773 102.534-39.965 158.816h-77.542c-14.138 0-25.6 11.461-25.6 25.6s11.462 25.6 25.6 25.6h77.544c3.19 56.283 16.878 110.243 39.965 158.816-53.056 15.622-91.909 64.738-91.909 122.784 0 14.139 11.462 25.6 25.6 25.6s25.6-11.461 25.6-25.6c0-38.984 29.205-71.254 66.88-76.138 8.928 13.632 18.677 26.68 29.259 39.026 62.965 73.458 147.013 113.912 236.661 113.912s173.698-40.454 236.661-113.912c10.581-12.346 20.331-25.394 29.258-39.026 37.677 4.883 66.882 37.152 66.882 76.138 0 14.139 11.461 25.6 25.6 25.6s25.6-11.461 25.6-25.6c0-58.046-38.853-107.163-91.907-122.784 23.086-48.571 36.773-102.533 39.965-158.816h77.542c14.139 0 25.6-11.461 25.6-25.6s-11.461-25.6-25.6-25.6zM486.4 102.4c98.811 0 179.2 80.389 179.2 179.2 0 10.986-0.99 21.824-2.933 32.458-52.312-37.811-112.885-58.058-176.267-58.058s-123.955 20.246-176.267 58.058c-1.942-10.634-2.933-21.472-2.933-32.458 0-98.811 80.389-179.2 179.2-179.2zM204.8 640c0-173.306 112.678-316.072 256-331.41v662.821c-143.322-15.339-256-158.106-256-331.411zM512 971.411v-662.821c143.322 15.338 256 158.104 256 331.41s-112.678 316.072-256 331.411z"></path></svg><a href="https://github.com/HeapsIO/heaps-doc/issues/new?title=Suggestion:%20Platform game&amp;body=%0A%0ASources:%0A*%20https://heaps.io/documentation/platform-game.html" rel="external">Report Suggestion</a></span></div></div></article></div></main><footer><div class="container row"><div class="col-5"><a href="./"><img src="img/logo.svg"/></a></div><div class="col-3 links"><h3>Heaps.io</h3><p>Heaps is an open source and multi-platform toolkit to create 2D and 3D games.</p><a href="documentation/getting-started">Download</a><a href="about.html">About</a><a href="api">API</a><a href="https://github.com/HeapsIO/">Contribute</a><a href="https://community.heaps.io/">Community</a><a href="https://discordapp.com/channels/162395145352904705/501408700142059520">Chat</a></div><div class="col-1">&nbsp;</div><div class="col-3 links"><h3>Haxe</h3><p>Haxe is an open source and cross-platform language and toolkit.</p><a href="https://haxe.org">About</a><a href="https://haxe.org/use-cases">Use cases</a><a href="https://haxe.org/documentation/introduction/">Learn</a><a href="https://haxe.org/foundation">Haxe Foundation</a></div></div><div class="copyright">&copy; 2024 <a href="https://haxe.org/foundation/">Haxe Foundation</a>| <a href="https://github.com/HeapsIO/heaps.io/tree/master/./assets/content/.temp-docs/Platform-game.md">Contribute to this page</a>| <a href="https://feathericons.com/" rel="nofollow">Feather open source icons</a></div></footer><script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script></body></html>